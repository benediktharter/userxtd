<?php/** * @package     Joomla.Administrator * @subpackage  com_userxtd * * @copyright   Copyright (C) 2012 Asikart. All rights reserved. * @license     GNU General Public License version 2 or later; see LICENSE.txt * @author      Generated by AKHelper - http://asikart.com */// no direct accessdefined('_JEXEC') or die;$user	= JFactory::getUser();$userId	= $user->get('id');$listOrder	= $this->state->get('list.ordering');$listDirn	= $this->state->get('list.direction');$canOrder	= $user->authorise('core.edit.state', 'com_userxtd');$saveOrder	= $listOrder == 'a.ordering';jimport('libraries.joomla.html.jgrid');include_once AKPATH_HTML.'/grid.php';?><script type="text/javascript">	window.addEvent('domready', function(){		var w 	= $$('#j-main-container')[0].getWidth() ;		var tr 	= $$('table.adminlist tbody tr')[0] ;		var d 	= $$('table.adminlist thead th.user-data') ;		var n 	= tr.getElements('.field-value-wrap').length ;				var data_w = 0 ;				d.each(function(e){			data_w += e.getWidth();		}) ;				$$('.field-value-wrap').setStyle('width', (w - data_w - 200) / n ) ;	});	</script><?php// Set Table// =================================================================================$table 	= array() ;$th 	= array() ;$tr 	= array() ;// Set Rows and Cells// =================================================================================foreach( $this->items as $k => $item ):	$item = new JObject($item);			$ordering	= ($listOrder == 'a.ordering');	$canCreate	= $user->authorise('core.create',		'com_userxtd');	$canEdit	= $user->authorise('core.edit',			'com_userxtd');	$canCheckin	= $user->authorise('core.manage',		'com_userxtd');	$canChange	= $user->authorise('core.edit.state',	'com_userxtd');	$canEditOwn = $user->authorise('core.edit.own',		'com_userxtd');			/*	// Example Column START	// =================================================================================		$column = 'example' ;						// Example TH		// -----------------------------------------		if($k == 0){			$th[$column]['option']['class'] 	= null ;			$th[$column]['option']['width'] 	= '5%' ;			$th[$column]['content'] 			= JHtml::_('grid.sort',  'JPUBLISHED', 'a.published', $listDirn, $listOrder);		}						// Example TD Option		// -----------------------------------------		$option['class'] = 'nowrap center' ;						// Example TD Content		// -----------------------------------------				$content = 'EXAMPLE' ;						// Put in $td		// -----------------------------------------		$td[$column]['option'] 	= $option ;		$td[$column]['content'] = $content ;	*/				// Checkbox Column START	// =================================================================================		$column = 'checkbox' ;						// Checkbox TH		// -----------------------------------------		if($k == 0){			$th[$column]['option']['class'] 	= 'user-data' ;			$th[$column]['option']['width'] 	= '1%' ;			$th[$column]['content'] 			= '<input type="checkbox" name="checkall-toggle" value="" onclick="Joomla.checkAll(this)" />';		}						// Checkbox TD Option		// -----------------------------------------		$option['class'] = 'nowrap center' ;						// Checkbox TD Content		// -----------------------------------------				$content = JHtml::_('grid.id', $k, $item->a_id); 						// Put in $td		// -----------------------------------------		$td[$column]['option'] 	= $option ;		$td[$column]['content'] = $content ;					// Name Column START	// =================================================================================		$column = 'name' ;						// Example TH		// -----------------------------------------		if($k == 0){			$th[$column]['option']['class'] 	= 'center user-data' ;			//$th[$column]['option']['width'] 	= '5%' ;			$th[$column]['content'] 			= JHtml::_('grid.sort',  'COM_USERS_HEADING_NAME', 'a.name', $listDirn, $listOrder);		}						// Example TD Option		// -----------------------------------------		$option['class'] = 'nowrap center' ;						// Example TD Content		// -----------------------------------------				$content = JHtml::link('index.php?option=com_users&task=user.edit&id='.$item->a_id, $item->a_name, array('target'=> '_blank')) ;						// Put in $td		// -----------------------------------------		$td[$column]['option'] 	= $option ;		$td[$column]['content'] = $content ;					// UserName Column START	// =================================================================================		$column = 'username' ;						// Example TH		// -----------------------------------------		if($k == 0){			$th[$column]['option']['class'] 	= 'center user-data' ;			//$th[$column]['option']['width'] 	= '5%' ;			$th[$column]['content'] 			= JHtml::_('grid.sort',  'JGLOBAL_USERNAME', 'a.username', $listDirn, $listOrder);		}						// Example TD Option		// -----------------------------------------		$option['class'] = 'nowrap center' ;						// Example TD Content		// -----------------------------------------				$content = $item->a_username ;						// Put in $td		// -----------------------------------------		$td[$column]['option'] 	= $option ;		$td[$column]['content'] = $content ;					// Enabled Column START	// =================================================================================		$column = 'enabled' ;						// Example TH		// -----------------------------------------		if($k == 0){			$th[$column]['option']['class'] 	= 'user-data' ;			$th[$column]['option']['width'] 	= '5%' ;			$th[$column]['content'] 			= JHtml::_('grid.sort',  'COM_USERS_HEADING_ENABLED', 'a.enabled', $listDirn, $listOrder);		}						// Example TD Option		// -----------------------------------------		$option['class'] = 'nowrap center' ;						// Example TD Content		// -----------------------------------------				if(!$item->a_block) {			$content = '<i class="icon-publish"></i>' ;		}else{			$content = '<i class="icon-unpublich"></i>' ;		}						// Put in $td		// -----------------------------------------		$td[$column]['option'] 	= $option ;		$td[$column]['content'] = $content ;					// Activated Column START	// =================================================================================		$column = 'activation' ;						// Example TH		// -----------------------------------------		if($k == 0){			$th[$column]['option']['class'] 	= 'user-data' ;			$th[$column]['option']['width'] 	= '5%' ;			$th[$column]['content'] 			= JHtml::_('grid.sort',  'COM_USERS_HEADING_ACTIVATED', 'a.activation', $listDirn, $listOrder);		}						// Example TD Option		// -----------------------------------------		$option['class'] = 'nowrap center' ;						// Example TD Content		// -----------------------------------------				if(!$item->a_activation) {			$content = '<i class="icon-publish"></i>' ;		}else{			$content = '<i class="icon-unpublich"></i>' ;		}						// Put in $td		// -----------------------------------------		$td[$column]['option'] 	= $option ;		$td[$column]['content'] = $content ;					$c		 = count($this->keys) ;	$c		 = $c ? $c : 1 ;	$width 	 = 70 / $c ;		foreach( $this->keys as $i => $key ):		if(!$key) continue;				$field = $this->filteredFields[$i];			// Example Column START		// =================================================================================			$column = $key ;									// Example TH			// -----------------------------------------			if($k == 0){				$th[$column]['option']['class'] 	= 'center' ;				$th[$column]['option']['width'] 	= '' ;				$th[$column]['option']['style']		= "max-width: {$width}%;";				$th[$column]['content'] 			= JHtml::_('grid.sort',  $field->title, $key, $listDirn, $listOrder) . '<div class="small" style="font-weight: normal;">('.$field->label.')</div>' ;			}									// Example TD Option			// -----------------------------------------			$option['class'] = 'nowrap center hasTip' ;									// Example TD Content			// -----------------------------------------						$content = $item->get($key) ;			$content = JFilterOutput::cleanText($content) ;						//$width   = $width ? $width : 0 ;			$content = '<div class="field-value-wrap" style=" max-height: 40px; text-overflow:ellipsis; overflow: hidden;">'.$content.'</div>';			//$content = JString::substr($content, 0, 20) ;			$option['title'] = strip_tags($content) ;						// Put in $td			// -----------------------------------------			$td[$column]['option'] 	= $option ;			$td[$column]['content'] = $content ;	endforeach;								// Set TR	// =================================================================================	$tr[$k]['option']['class'] 				= "row".($k%2) ;	//$tr[$k]['option']['sortable-group-id'] 	= $item->a_catid;	$tr[$k]['td'] = $td ;endforeach;// Set th in Table$table['thead']['tr'][0]['option'] = array() ;$table['thead']['tr'][0]['th'] 	= $th ;$table['tbody']['tr'] 			= $tr ;$table_option = array( 'class' => 'table table-striped table-bordered adminlist', 'id' => 'articleList' ) ;// Render Gridif(count($this->items)) {	echo $this->renderGrid($table, $table_option) ;}else{	echo JText::_('COM_USERXTD_NO_DATA');}?>